from dataclasses import dataclass

from aiogram.fsm.state import State, StatesGroup
from aiogram.types import InlineKeyboardButton as Button, KeyboardButton as KButton, Message
from aiogram.utils.keyboard import InlineKeyboardBuilder as Board, ReplyKeyboardBuilder as KBoard

start_board = Board([
    [Button(text='–ü—Ä–æ–≥–Ω–æ–∑ –ø–æ–≥–æ–¥—ã', callback_data='weather forecast')],
    [Button(text='–ù–∞—Å—Ç—Ä–æ–π–∫–∏', callback_data='settings')]
]).as_markup()
back_btn = lambda data='', text='': Button(text='üîô –ù–∞–∑–∞–¥' if not text else text, callback_data=f'back_{data}')

settings_board = Board([
    [Button(text='üó∫Ô∏è –û–±–Ω–æ–≤–∏—Ç—å –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ', callback_data='send_location')],
    [Button(text='üîî –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è', callback_data='notify_settings')],
    [Button(text='üóëÔ∏è –£–¥–∞–ª–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ', callback_data='delete_data')],
    [back_btn()]
]).as_markup()
location_board = KBoard([
    [KButton(text='üó∫Ô∏è –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–≤–æ—ë –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ', request_location=True)],
    [KButton(text='üîô –ù–∞–∑–∞–¥')]
]).as_markup(one_time_keyboard=True, resize_keyboard=True)

time_board = lambda h=None, m=None: lambda data='', text='': Board(
    [[Button(text='–ß–∞—Å—ã: ‚ÜòÔ∏è' if h is None else f'–ß–∞—Å—ã: {h:02} ‚ÜòÔ∏è', callback_data='show_h')],
     [Button(text='–ú–∏–Ω—É—Ç—ã: ‚ÜòÔ∏è' if m is None else f'–ú–∏–Ω—É—Ç—ã: {m:02} ‚ÜòÔ∏è', callback_data='show_m')],
     [back_btn(data, text)]
     + ([] if h is None or m is None else [Button(text='–°–æ–∑–¥–∞—Ç—å üîî', callback_data=f'create_notify {h}:{m}')])]
).as_markup()
hour_board = lambda h=None, m=None: lambda data='', text='': Board(
    [[Button(text='–ß–∞—Å—ã: ‚ÜñÔ∏è' if h is None else f'–ß–∞—Å—ã: {h:02} ‚ÜñÔ∏è', callback_data='hide_h')]]
    + [[Button(text=f'‚úÖ {n:02}' if h == n else f'{n:02}', callback_data=f'set h {n}') for n in range(i, i + 6)]
       for i in range(0, 24, 6)]
    + [[Button(text='–ú–∏–Ω—É—Ç—ã: ‚ÜòÔ∏è' if m is None else f'–ú–∏–Ω—É—Ç—ã: {m:02} ‚ÜòÔ∏è', callback_data='show_m')],
       [back_btn(data, text)]
       + ([] if h is None or m is None else [Button(text='–°–æ–∑–¥–∞—Ç—å üîî', callback_data=f'create_notify {h}:{m}')])]
).as_markup()
minute_board = lambda h=None, m=None: lambda data='', text='': Board(
    [[Button(text='–ß–∞—Å—ã: ‚ÜòÔ∏è' if h is None else f'–ß–∞—Å—ã: {h:02} ‚ÜòÔ∏è', callback_data='show_h')]]
    + [[Button(text='–ú–∏–Ω—É—Ç—ã: ‚ÜñÔ∏è' if m is None else f'–ú–∏–Ω—É—Ç—ã: {m:02} ‚ÜñÔ∏è', callback_data='hide_m')]]
    + [[Button(text=f'‚úÖ {n:02}' if m == n else f'{n:02}', callback_data=f'set m {n}') for n in range(i, i + 30, 5)]
       for i in range(0, 60, 30)]
    + [[back_btn(data, text)]
       + ([] if h is None or m is None else [Button(text='–°–æ–∑–¥–∞—Ç—å üîî', callback_data=f'create_notify {h}:{m}')])]
).as_markup()


START = ('{}{}\n\n–° –ø–æ–º–æ—â—å—é –≤–µ—Ç—Ä–æ–≤ –∑–Ω–∞–Ω–∏–π –∏ —Å–∏–ª —Å–æ–ª–Ω—Ü–∞, –Ω–µ–±–∞ –∏ –¥–æ–∂–¥—è —è –ø—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞—é –ø—Ä–æ–≥–Ω–æ–∑ –ø–æ–≥–æ–¥—ã –Ω–∞ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å! '
         '–ù–∞–∂–º–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É ¬´–ü—Ä–æ–≥–Ω–æ–∑ –ø–æ–≥–æ–¥—ã¬ª, —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å –ø—Ä–æ–≥–Ω–æ–∑ –ø–æ–≥–æ–¥—ã –Ω–∞ —Å–µ–≥–æ–¥–Ω—è, –Ω–∞ –∑–∞–≤—Ç—Ä–∞ –∏ –¥–∞–∂–µ –Ω–∞ —Ü–µ–ª—É—é –Ω–µ–¥–µ–ª—é '
         '–≤–ø–µ—Ä—ë–¥. ‚õÖ\n\n–¢—ã –º–æ–∂–µ—à—å –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –º–µ–Ω—è –≤ ¬´–ù–∞—Å—Ç—Ä–æ–π–∫–∞—Ö¬ª –∏ —É–∫–∞–∑–∞—Ç—å —Å–≤–æ—ë –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –∏–ª–∏ –≤—Ä–µ–º—è, –∫–æ–≥–¥–∞ —Ç—ã '
         '—Ö–æ—á–µ—à—å –ø–æ–ª—É—á–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è. üîî')
SETTINGS = ('–ó–¥–µ—Å—å —Ç—ã –º–æ–∂–µ—à—å –æ–±–Ω–æ–≤–∏—Ç—å —Å–≤–æ—ë –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø–æ–≥–æ–¥–µ. ‚öôÔ∏è\n\n–Ø –∑–∞ '
            '–∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å, –ø–æ—ç—Ç–æ–º—É –ø–æ –∂–µ–ª–∞–Ω–∏—é —Ç—ã –º–æ–∂–µ—à—å —É–¥–∞–ª–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –æ —Å–µ–±–µ –∏ –∑–∞—Å—Ç–∞–≤–∏—Ç—å –º–µ–Ω—è –∑–∞–±—ã—Ç—å —Ç–µ–±—è, '
            '–Ω–∞–∂–∞–≤ –Ω–∞ –∫–Ω–æ–ø–∫—É ¬´–£–¥–∞–ª–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ¬ª. üòâ')
DATA_DELETED = '–û–π, –∫—Ç–æ-—Ç–æ —Å–≤–µ—Ä–∫–Ω—É–ª —É –º–µ–Ω—è –ø–µ—Ä–µ–¥ –ª–∏—Ü–æ–º –ù–µ–π—Ä–∞–ª–∏–∑–∞—Ç–æ—Ä–æ–º –∏–∑ ¬´–õ—é–¥–µ–π –≤ —á—ë—Ä–Ω–æ–º¬ª... –Ø –≤—Å—ë –∑–∞–±—ã–ª –ø—Ä–æ —Ç–µ–±—è...'

CURR_LOCATION = '–Ø –ø–æ–º–Ω—é, —á—Ç–æ —Ç—ã –∏–∑ {}. üòâ'
LOCATION = ('–ù–∞–∂–º–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ, —á—Ç–æ–±—ã –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–≤–æ—ë —Ç–µ–∫—É—â–µ–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ, –∏ –¥–∞–ª—å—à–µ —è –≤—Å—ë —Å–¥–µ–ª–∞—é –∑–∞ —Ç–µ–±—è! üîç\n\n'
            '–ò–ª–∏ –º–æ–∂–µ—à—å –Ω–∞–∂–∞—Ç—å –Ω–∞ üìé –∏ –ø–æ–¥–µ–ª–∏—Ç—å—Å—è –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ–º —Ç–∞–∫, –µ—Å–ª–∏ —Ö–æ—á–µ—à—å —É–∫–∞–∑–∞—Ç—å –¥—Ä—É–≥–æ–µ.\n\n–ù—É –∏, –Ω–∞–∫–æ–Ω–µ—Ü, '
            '–º–æ–∂–µ—à—å –ø—Ä–æ—Å—Ç–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –º–Ω–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –≥–æ—Ä–æ–¥–∞.')
LOCATION_SET = '–Ø –∑–∞–ø–æ–º–Ω–∏–ª, –≥–¥–µ —Ç—ã –∂–∏–≤—ë—à—å ;) –ü—Ä–∏—è—Ç–Ω–æ –ø–æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å –∂–∏—Ç–µ–ª–µ–º {}! ü§ù'
LOCATION_ERROR = ('–Ø —Å—Ç–∞—Ä–∞–ª—Å—è, –Ω–æ –Ω–µ —Å–º–æ–≥ –Ω–∞–π—Ç–∏ —Ç–≤–æ–π –≥–æ—Ä–æ–¥. üò© –ú–æ–∂–µ—Ç –±—ã—Ç—å, –≥–¥–µ-—Ç–æ –æ–ø–µ—á–∞—Ç–∫–∞? –ü–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑ –∏–ª–∏ –æ—Ç–ø—Ä–∞–≤—å'
                  ' –º–Ω–µ —Å–≤–æ—ë –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ –∏–ª–∏ —Å –ø–æ–º–æ—â—å—é üìé.')
NO_LOCATION_FORECAST = '–ß—Ç–æ–±—ã –ø—Ä–µ–¥—Å–∫–∞–∑–∞—Ç—å –ø—Ä–æ–≥–Ω–æ–∑ –ø–æ–≥–æ–¥—ã, –º–Ω–µ –Ω—É–∂–Ω–æ –∑–Ω–∞—Ç—å, –≥–¥–µ —Ç—ã –Ω–∞—Ö–æ–¥–∏—à—å—Å—è ;)'

CURR_NOTIFY = ('–°–ø–∏—Å–æ–∫ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π: {}\n\n–ù–∞–∂–º–∏ –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –Ω–∏–∂–µ, –µ—Å–ª–∏ —Ö–æ—á–µ—à—å –µ–≥–æ —É–¥–∞–ª–∏—Ç—å. üôÖüèª‚Äç‚ôÇÔ∏è',
               '–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã.\n\n–ù–∞–∂–º–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ, —á—Ç–æ–±—ã —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è. üëáüèª')
NO_LOCATION_NOTIFY = ('–Ø –Ω–µ —Å–º–æ–≥—É –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ–±–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å –ø–æ–≥–æ–¥–æ–π, –ø–æ—Ç–æ–º—É —á—Ç–æ –Ω–µ –∑–Ω–∞—é, –≥–¥–µ —Ç—ã –Ω–∞—Ö–æ–¥–∏—à—å—Å—è. ü§∑üèª‚Äç‚ôÇÔ∏è '
                      '–ù–µ –∑–∞–±—É–¥—å –ø–æ–∫–∞–∑–∞—Ç—å –º–Ω–µ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —Å–≤–æ—ë –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ ;)')
NEW_NOTIFY = '–í—ã–±–µ—Ä–∏ —á–∞—Å—ã –∏ –º–∏–Ω—É—Ç—ã –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏ –Ω–∞–∂–º–∏ ¬´–°–æ–∑–¥–∞—Ç—å¬ª –∏–ª–∏ –≤–≤–µ–¥–∏ –∏—Ö –≤ —Ñ–æ—Ä–º–∞—Ç–µ HH:MM. ü§ì'
NOTIFY_ERROR = ('–ß—Ç–æ-—Ç–æ –º–Ω–µ –Ω–µ —Ä–∞–∑–æ–±—Ä–∞—Ç—å, —á—Ç–æ —Ç—ã –Ω–∞–ø–∏—Å–∞–ª. ü§® –ú–æ–∂–µ—Ç –±—ã—Ç—å, —É —Ç–µ–±—è –≥–¥–µ-—Ç–æ –æ—à–∏–±–æ—á–∫–∞? –ü–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑ –∏–ª–∏'
                '–≤–æ—Å–ø–æ–ª—å–∑—É–π—Å—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–æ–π –Ω–∏–∂–µ ;)')
NOTIFY_SUCCESS = '–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–æ!  ü•≥'

FORECAST = ('{1} –°–µ–≥–æ–¥–Ω—è –≤ {0} {2}.\nüå°Ô∏è –ù–∞ —É–ª–∏—Ü–µ {3}¬∞C (–æ—â—É—â–∞–µ—Ç—Å—è –∫–∞–∫ {4}¬∞C).\nü´† –î–∞–≤–ª–µ–Ω–∏–µ: {5} –º–º —Ä—Ç.—Å—Ç.\nüí¶ –í–ª–∞–∂–Ω–æ—Å—Ç—å: '
            '{6}%.\nüçÉ {7} –≤–µ—Ç–µ—Ä —Å–∫–æ—Ä–æ—Å—Ç—å—é {8} –º/c.\n‚òÅÔ∏è –ù–∞ –Ω–µ–±–µ –æ–±–ª–∞—á–Ω–æ—Å—Ç—å –≤ {9}%.')

SOON = '–í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ ‚Äî –∂–¥–∏—Ç–µ –æ—á–µ–Ω—å —Å–∫–æ—Ä–æ! üîú'


@dataclass
class CallbackData:
    data: str
    message: Message


class Dialog(StatesGroup):
    get_geo = State()
    get_notify_time = State()
